server start at 0.0.0.0:3100
starting gRPC server on haomiao-yx.com:4001
gRPC server is running on:haomiao-yx.com:4001 
echo server with multi-core=true is listening on tcp4://0.0.0.0:3000

starting gRPC server on haomiao-yx.com:4001
gRPC server is running on:haomiao-yx.com:4001 
echo server with multi-core=true is listening on tcp4://0.0.0.0:3000

starting gRPC server on haomiao-yx.com:4001
default logging level is INFO
gRPC server is running on:haomiao-yx.com:4001 
Launching gnet with 8 event-loops, listening on: tcp4://0.0.0.0:3000
echo server with multi-core=true is listening on tcp4://0.0.0.0:3000

starting gRPC server on haomiao-yx.com:4001
default logging level is INFO
gRPC server is running on:haomiao-yx.com:4001 
Launching gnet with 8 event-loops, listening on: tcp4://0.0.0.0:3000
echo server with multi-core=true is listening on tcp4://0.0.0.0:3000

conn[127.0.0.1:65121] connected
COMMAND_TYPE_LOGIN:{"type":"login","data":{"userId":456}}
server start at 0.0.0.0:3100
2024-10-27T18:14:09.491+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-27T18:15:53.259+0800	msg/msg_handler.go:177	send msg success  msgId:1730024153112-123-456-0-672545,chatType:0, msgType:1, sequence:2
2024-10-27T18:15:53.272+0800	msg/msg_handler.go:196	add to push mq  success:1730024153112-123-456-0-672545
2024-10-27T18:26:12.832+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-27T18:26:37.298+0800	msg/msg_handler.go:177	send msg success  msgId:1730024797201-123-456-0-45396,chatType:0, msgType:1, sequence:3
2024-10-27T18:26:37.305+0800	msg/msg_handler.go:196	add to push mq  success:1730024797201-123-456-0-45396
2024-10-27T18:55:37.089+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-27T18:59:51.517+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-27T18:59:51.564+0800	logger/logger.go:167	[31;1m/Users/yx/development/project/xiaogongqiu/im/internal/dao/im_recent_session.go:84 [35;1mError 1054 (42S22): Unknown column 'sequence' in 'where clause'
[0m[33m[6.098ms] [34;1m[rows:0][0m SELECT * FROM `im_recent_session` WHERE user_id = ? AND sequence > ? AND type = ? AND deleted_time IS NULL ORDER BY updated_time DESC,sequence desc
2024-10-27T19:06:30.220+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-27T19:06:32.962+0800	logger/logger.go:167	[31;1m/Users/yx/development/project/xiaogongqiu/im/internal/dao/im_recent_session.go:85 [35;1mError 1054 (42S22): Unknown column 'a.sequence' in 'order clause'
[0m[33m[2.892ms] [34;1m[rows:0][0m SELECT a.*,b.sequence FROM im_recent_session a left join im_conversation b on a.conversation_id = b.id WHERE a.user_id = ? AND a.type = ? AND a.deleted_time IS NULL ORDER BY a.updated_time DESC,a.sequence desc
2024-10-27T19:06:49.465+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-27T19:17:44.105+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-27T19:23:03.000+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-28T10:33:41.737+0800	msg/msg_handler.go:170	send msg success  msgId:1730082821336-123-456-0-425254,chatType:0, msgType:1, sequence:4
2024-10-28T10:33:41.757+0800	msg/msg_handler.go:189	add to push mq  success:1730082821336-123-456-0-425254
2024-10-28T10:37:16.039+0800	msg/msg_handler.go:170	send msg success  msgId:1730083035958-123-456-0-42708,chatType:0, msgType:1, sequence:5
2024-10-28T10:37:16.048+0800	msg/msg_handler.go:189	add to push mq  success:1730083035958-123-456-0-42708
2024-10-28T11:30:52.677+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-28T11:31:08.832+0800	msg/msg_handler.go:171	send msg success  msgId:1730086268666-123-456-0-969633,chatType:0, msgType:1, sequence:6
2024-10-28T11:31:08.851+0800	msg/msg_handler.go:190	add to push mq  success:1730086268666-123-456-0-969633
2024-10-28T11:39:05.196+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-28T11:39:27.288+0800	msg/msg_handler.go:171	send msg success  msgId:1730086767222-123-456-0-649649,chatType:0, msgType:1, sequence:7
2024-10-28T11:39:27.304+0800	msg/msg_handler.go:190	add to push mq  success:1730086767222-123-456-0-649649
2024-10-28T11:42:46.033+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-28T11:43:19.822+0800	msg/msg_handler.go:171	send msg success  msgId:1730086999755-123-456-0-443854,chatType:0, msgType:1, sequence:8
2024-10-28T11:43:19.827+0800	msg/msg_handler.go:190	add to push mq  success:1730086999755-123-456-0-443854
2024-10-28T11:44:39.756+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-28T11:44:48.185+0800	msg/msg_handler.go:171	send msg success  msgId:1730087088086-123-456-0-21861,chatType:0, msgType:1, sequence:9
2024-10-28T11:44:48.189+0800	msg/msg_handler.go:190	add to push mq  success:1730087088086-123-456-0-21861
2024-10-28T14:58:52.275+0800	msg/msg_handler.go:171	send msg success  msgId:2134012-100-123-abc123,chatType:3, msgType:3, sequence:1
2024-10-28T14:58:52.285+0800	msg/msg_handler.go:190	add to push mq  success:2134012-100-123-abc123
2024-10-28T21:02:03.162+0800	msg/msg_handler.go:171	send msg success  msgId:1730120522795-123-456-0-668588,chatType:0, msgType:1, sequence:1
2024-10-28T21:02:03.256+0800	msg/msg_handler.go:190	add to push mq  success:1730120522795-123-456-0-668588
2024-10-28T21:04:08.886+0800	msg/msg_handler.go:171	send msg success  msgId:1730120648813-123-456-0-197192,chatType:0, msgType:1, sequence:2
2024-10-28T21:04:08.892+0800	msg/msg_handler.go:190	add to push mq  success:1730120648813-123-456-0-197192
2024-10-28T21:06:14.989+0800	msg/msg_handler.go:171	send msg success  msgId:1730120774935-123-456-0-340237,chatType:0, msgType:1, sequence:3
2024-10-28T21:06:14.998+0800	msg/msg_handler.go:190	add to push mq  success:1730120774935-123-456-0-340237
2024-10-28T21:10:33.954+0800	msg/msg_handler.go:171	send msg success  msgId:1730121033827-35-64-0-820042,chatType:0, msgType:1, sequence:1
2024-10-28T21:10:33.967+0800	msg/msg_handler.go:190	add to push mq  success:1730121033827-35-64-0-820042
2024-10-28T21:12:29.005+0800	msg/msg_handler.go:171	send msg success  msgId:1730121148940-35-64-0-39894,chatType:0, msgType:1, sequence:2
2024-10-28T21:12:29.011+0800	msg/msg_handler.go:190	add to push mq  success:1730121148940-35-64-0-39894
2024-10-28T21:13:19.591+0800	msg/msg_handler.go:171	send msg success  msgId:1730121199537-35-64-0-619550,chatType:0, msgType:1, sequence:3
2024-10-28T21:13:19.596+0800	msg/msg_handler.go:190	add to push mq  success:1730121199537-35-64-0-619550
2024-10-28T21:32:51.253+0800	msg/msg_handler.go:171	send msg success  msgId:1730122371114-35-64-0-268179,chatType:0, msgType:1, sequence:4
2024-10-28T21:32:51.273+0800	msg/msg_handler.go:190	add to push mq  success:1730122371114-35-64-0-268179
2024-10-28T21:33:33.765+0800	msg/msg_handler.go:171	send msg success  msgId:1730122413713-35-64-0-207320,chatType:0, msgType:1, sequence:5
2024-10-28T21:33:33.772+0800	msg/msg_handler.go:190	add to push mq  success:1730122413713-35-64-0-207320
2024-10-28T21:34:10.795+0800	msg/msg_handler.go:171	send msg success  msgId:1730122450738-35-64-0-701506,chatType:0, msgType:1, sequence:6
2024-10-28T21:34:10.802+0800	msg/msg_handler.go:190	add to push mq  success:1730122450738-35-64-0-701506
2024-10-28T22:10:15.787+0800	msg/msg_handler.go:171	send msg success  msgId:1730124615590-35-64-0-294940,chatType:0, msgType:1, sequence:7
2024-10-28T22:10:15.804+0800	msg/msg_handler.go:190	add to push mq  success:1730124615590-35-64-0-294940
2024-10-30T11:01:16.584+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-30T11:03:01.819+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-30T11:04:11.528+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-30T11:10:05.322+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-30T11:16:12.548+0800	msg/msg_handler.go:171	send msg success  msgId:1730258172289-35-64-0-572675,chatType:0, msgType:1, sequence:7
2024-10-30T11:16:12.560+0800	msg/msg_handler.go:190	add to push mq  success:1730258172289-35-64-0-572675
2024-10-30T11:23:02.837+0800	msg/msg_handler.go:171	send msg success  msgId:1730258582762-35-64-0-340259,chatType:0, msgType:1, sequence:8
2024-10-30T11:23:02.846+0800	msg/msg_handler.go:190	add to push mq  success:1730258582762-35-64-0-340259
2024-10-30T11:28:12.052+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-30T11:30:26.334+0800	msg/msg_handler.go:171	send msg success  msgId:1730259026239-35-64-0-235912,chatType:0, msgType:1, sequence:9
2024-10-30T11:30:26.340+0800	msg/msg_handler.go:190	add to push mq  success:1730259026239-35-64-0-235912
2024-10-30T11:32:01.310+0800	msg/msg_handler.go:171	send msg success  msgId:1730259121249-35-64-0-35959,chatType:0, msgType:1, sequence:10
2024-10-30T11:32:01.312+0800	msg/msg_handler.go:190	add to push mq  success:1730259121249-35-64-0-35959
2024-10-30T11:37:47.910+0800	msg/msg_handler.go:171	send msg success  msgId:1730259467843-35-64-0-512468,chatType:0, msgType:1, sequence:11
2024-10-30T11:37:47.914+0800	msg/msg_handler.go:190	add to push mq  success:1730259467843-35-64-0-512468
2024-10-30T11:42:09.316+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-30T11:42:44.370+0800	msg/msg_handler.go:171	send msg success  msgId:1730259764272-35-64-0-553173,chatType:0, msgType:1, sequence:12
2024-10-30T11:42:44.377+0800	msg/msg_handler.go:190	add to push mq  success:1730259764272-35-64-0-553173
2024-10-30T11:59:48.625+0800	msg/msg_handler.go:171	send msg success  msgId:1730260788551-35-64-0-250359,chatType:0, msgType:1, sequence:13
2024-10-30T11:59:48.629+0800	msg/msg_handler.go:190	add to push mq  success:1730260788551-35-64-0-250359
2024-10-30T19:59:48.585+0800	msg/msg_handler.go:171	send msg success  msgId:1730289588343-35-64-0-491743,chatType:0, msgType:1, sequence:14
2024-10-30T19:59:48.605+0800	msg/msg_handler.go:190	add to push mq  success:1730289588343-35-64-0-491743
2024-10-30T20:01:18.036+0800	msg/msg_handler.go:171	send msg success  msgId:1730289677987-35-64-0-584002,chatType:0, msgType:1, sequence:15
2024-10-30T20:01:18.042+0800	msg/msg_handler.go:190	add to push mq  success:1730289677987-35-64-0-584002
2024-10-30T20:01:51.109+0800	msg/msg_handler.go:171	send msg success  msgId:1730289711058-35-64-0-656988,chatType:0, msgType:1, sequence:16
2024-10-30T20:01:51.113+0800	msg/msg_handler.go:190	add to push mq  success:1730289711058-35-64-0-656988
2024-10-30T20:02:50.847+0800	msg/msg_handler.go:171	send msg success  msgId:1730289770790-35-64-0-19150,chatType:0, msgType:1, sequence:17
2024-10-30T20:02:50.852+0800	msg/msg_handler.go:190	add to push mq  success:1730289770790-35-64-0-19150
2024-10-31T11:17:02.934+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-31T11:19:42.013+0800	msg/msg_handler.go:171	send msg success  msgId:1730344781914-35-64-0-892225,chatType:0, msgType:1, sequence:18
2024-10-31T11:19:42.022+0800	msg/msg_handler.go:190	add to push mq  success:1730344781914-35-64-0-892225
2024-10-31T11:23:13.945+0800	msg/msg_handler.go:171	send msg success  msgId:1730344993888-35-64-0-167066,chatType:0, msgType:1, sequence:1
2024-10-31T11:23:13.950+0800	msg/msg_handler.go:190	add to push mq  success:1730344993888-35-64-0-167066
2024-10-31T11:25:33.558+0800	msg/msg_handler.go:171	send msg success  msgId:1730345133501-35-64-0-276255,chatType:0, msgType:1, sequence:2
2024-10-31T11:25:33.564+0800	msg/msg_handler.go:190	add to push mq  success:1730345133501-35-64-0-276255
2024-10-31T11:26:53.369+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-31T11:27:38.617+0800	msg/msg_handler.go:171	send msg success  msgId:1730345258558-35-64-0-141087,chatType:0, msgType:1, sequence:3
2024-10-31T11:27:38.622+0800	msg/msg_handler.go:190	add to push mq  success:1730345258558-35-64-0-141087
2024-10-31T11:29:13.798+0800	msg/msg_handler.go:171	send msg success  msgId:1730345353743-35-64-0-506468,chatType:0, msgType:1, sequence:4
2024-10-31T11:29:13.804+0800	msg/msg_handler.go:190	add to push mq  success:1730345353743-35-64-0-506468
2024-10-31T11:32:46.518+0800	msg/msg_handler.go:171	send msg success  msgId:1730345566439-35-64-0-570116,chatType:0, msgType:1, sequence:5
2024-10-31T11:32:46.522+0800	msg/msg_handler.go:190	add to push mq  success:1730345566439-35-64-0-570116
2024-10-31T11:33:56.598+0800	msg/msg_handler.go:171	send msg success  msgId:1730345636538-35-64-0-897768,chatType:0, msgType:1, sequence:1
2024-10-31T11:33:56.608+0800	msg/msg_handler.go:190	add to push mq  success:1730345636538-35-64-0-897768
2024-10-31T11:37:44.332+0800	api/api_server.go:39	server start at 0.0.0.0:3100
2024-10-31T11:38:28.734+0800	msg/msg_handler.go:171	send msg success  msgId:1730345908675-35-64-0-677788,chatType:0, msgType:1, sequence:1
2024-10-31T11:38:28.737+0800	msg/msg_handler.go:190	add to push mq  success:1730345908675-35-64-0-677788
2024-10-31T11:39:35.374+0800	msg/msg_handler.go:171	send msg success  msgId:2134012-100-123-abc123,chatType:3, msgType:3, sequence:1
2024-10-31T11:39:35.381+0800	msg/msg_handler.go:190	add to push mq  success:2134012-100-123-abc123
